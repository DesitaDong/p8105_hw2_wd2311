p8105_hw2_wd2311
================
wd2311
2025-10-02

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.2
    ## ✔ ggplot2   4.0.0     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

# Problem 1

Read and clean the data in pols-month.csv

``` r
pols_df = read_csv(file = "./data/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_df = 
  janitor::clean_names(pols_df) |>
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    month = tolower(month.name[month_num]),
    president = if_else(prez_gop == 1, "gop", "dem")
  ) |>
  select(year, month, president, starts_with("gov"), starts_with("sen"),
         starts_with("rep"), matches("^prez_"), everything()) |>
  select(-prez_gop, -prez_dem, -day, -month_num) |>
  arrange(year, match(month, tolower(month.name)))
```

Read and clean the data in snp.csv

``` r
snp_df <- read_csv(file.path("./data/snp.csv")) |>
  janitor::clean_names() |>
  mutate(date = mdy(date)) |>
  transmute(
    year  = year(date),
    month = tolower(month(date, label = TRUE, abbr = FALSE)),
    close
  ) |>
  arrange(year, match(month, tolower(month.name)))
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

tidy the unemployment data

``` r
unemp_df <- read_csv(file.path("./data/unemployment.csv")) |>
  janitor::clean_names() |>
  pivot_longer(
    cols = -year,
    names_to = "month",
    values_to = "unemployment"
  ) |>
  mutate(
    month = tolower(month.name[match(str_to_title(month), month.abb)])
  ) |>
  arrange(year, match(month, tolower(month.name)))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Join the datasets by merging snp into pols, and merging unemployment
into the result.

``` r
pols_snp_df = 
  left_join(pols_df, snp_df, by = c("year", "month"))

merged_df =
  left_join(pols_snp_df, unemp_df, by = c("year", "month"))
dim(merged_df)
```

    ## [1] 822  11

``` r
summary(select(merged_df, year, month, close, unemployment, president))
```

    ##       year         month               close          unemployment  
    ##  Min.   :1947   Length:822         Min.   :  63.54   Min.   : 2.50  
    ##  1st Qu.:1964   Class :character   1st Qu.: 114.69   1st Qu.: 4.70  
    ##  Median :1981   Mode  :character   Median : 413.37   Median : 5.60  
    ##  Mean   :1981                      Mean   : 643.34   Mean   : 5.83  
    ##  3rd Qu.:1998                      3rd Qu.:1146.78   3rd Qu.: 6.90  
    ##  Max.   :2015                      Max.   :2107.39   Max.   :10.80  
    ##                                    NA's   :264       NA's   :12     
    ##   president        
    ##  Length:822        
    ##  Class :character  
    ##  Mode  :character  
    ##                    
    ##                    
    ##                    
    ## 

Explain briefly what each dataset contained, and describe the resulting
dataset (e.g. give the dimension, range of years, and names of key
variables). \### Description: pols_month_df provides monthly counts of
national political officeholders and a president indicator; snp\_.csv_df
contains S&P 500 closing values by date. unemp_loyment.csv_df reports
monthly U.S. unemployment rates in wide form.

After left-joining S&P into pols and then unemployment into the result,
the final merged dataset has 822 rows and 11 columns, spans 1947 to
2015, and its key variables include year, month, president, close,
unemployment, and 6 variables on the parties of national politicians.

# Problem 2

# Problem 3
